---
title: 'EAM QuickView: A simulation data visualizer for the E3SM Atmosphere Model'
tags:
  - Python
  - visualization
  - graphical user interface
  - atmosphere modeling
authors:
  - name: Abhishek Yenpure
    orcid: 0000-0002-7403-7661
    corresponding: true # (This is how to denote the corresponding author)
    affiliation: 1
  - name: Berk Geveci
    orcid: 0000-0003-2477-4855
    affiliation: 1
  - name: Sebastien Jourdain
    orcid: 0000-0001-8083-271X
    affiliation: 1
  - name: Hui Wan
    orcid: 0000-0001-5294-4116
    affiliation: 2
  - name: Kai Zhang
    orcid: 0000-0003-0457-6368
    affiliation: 2
affiliations:
 - name: Kitware Inc., United States
   index: 1
   ror: 02s2acn37 # https://ror.org/02s2acn37
 - name: Atmospheric, Climate, and Earth Sciences Division, Pacific Northwest National Laboratory, United States
   index: 2
   ror: 05h992307 # https://ror.org/05h992307
date: 05 January 2025
bibliography: paper.bib

# Optional fields if submitting to a AAS journal too, see this blog post:
# https://blog.joss.theoj.org/2018/12/a-new-collaboration-with-aas-publishing
#aas-doi: 10.3847/xxxxx <- update this with the DOI from AAS once you know it.
#aas-journal: Astrophysical Journal <- The name of the AAS journal.
---

# Summary

EAM QuickView is a visualization application (app) providing overviews of the geographical distribution of quantities simulated by a global atmospheric model, the Energy Exascale Earth System Model (E3SM) Atmosphere Model (EAM), directly from the NetCDF files generated by simulations. Compared to existing visualizers, EAM QuickView supports displaying multiple quantities and arranging different figures by drag-and-drop, as well as saving the state of the visualization and resuming at a later time. Under the hood, the app uses the Python-based [trame](https://www.kitware.com/trame/) framework to create a simple and tailored user interface (UI) to the general-purpose data analysis and visualization tool [ParaView](https://www.paraview.org/). This design makes ParaView easily accessible to atmospheric scientists without requiring expertise in visual analytics.

# Statement of need

EAM, like many other simulation codes used in Earth system sciences, solves a complex set of equations and writes out results for a large number of physical quantities in the form of NetCDF files. After a simulation is completed and before more focused and detailed analyses are performed, it is often useful to obtain a first impression of the characteristic values of the simulated quantities and their geographical distributions. The tool [ncview](https://cirrus.ucsd.edu/ncview/) developed by [@DavidWPierce:1993] has been used widely in Earth system modeling communities for quick and easy, push-button inspections of NetCDF files. The newer tool [ncvis](https://github.com/SEATStandards/ncvis) developed by [@PaulUllrich:2022] is inspired by [ncview](https://cirrus.ucsd.edu/ncview/) but can also handle data on unstructured meshes.

![Figure 1: Aerosol concentrations simulated by EAMv2.](images/fig_EAMv2_aerosols.png)

Compared to ncview and ncvis, the app presented here has the additional feature of simultaneously presenting multiple variables in a single viewport. The arrangement of the different variables in the viewport can be saved as a state file and reloaded into the app at a later time. The atmosphere modelers' wish for such features has become more prominent in the past years due to the rapid increase of model complexity in terms of the number of equations solved by the numerical models and the number of variables typically archived in the NetCDF files. For example, to inspect the simulated aerosol life cycles, it may be useful to examine the concentrations of multiple chemical components in different particle size ranges (see, e.g., Figure 1).

# Overall strategy

The creation of EAM QuickView was part of a bigger effort aimed at more effectively leveraging modern visual analytics tools to facilitate the development of EAM. The general-purpose visualization tool ParaView was chosen to be the engine in this effort because of ParaView's large collection of analysis and visualization capabilities as well as its built-in ability to handle big data through parallel processing. The later is imperative for global atmospheric models, especially in the era of high-resolution modeling.

ParaView's own UI is comprehensive, but using it requires a very steep learning curve. In our experience, this has resulted in many cases of frustration followed by disuse or rejection of the tool by users unfamiliar with the visual analytics language. To overcome this barrier, we decided to present a new set of apps to the atmospheric scientists in their own scientific language. Each of the apps will have a limited scope - and hence a simple and intuitive GUI - tailored to a single category of visualization tasks in the day-to-day work of EAM development. EAM QuickView is the first member of this new app family; other examples in development include quick comparison of two or more simulations as well as easy slicing and dicing of 3D fields using arbitrary planes and boxes.

Since the current work is focused on facilitating the development of EAM, our app presented here is designed to work with the cubed sphere horizontal mesh and the pressure-based terrain following vertical coordinate. In this sense, EAM QuickView is an app written specifically for EAM, while the earlier tool [ncvis](https://github.com/SEATStandards/ncvis) can be used out-of-the-box for many different models and meshes. The adaptation of EAM QuickView for other models and meshes can be done by updating the ParaView Reader in the app.

# Technical Details

QuickView is built on Kitware's Trame framework [@Kitware:2024:trame] to create a web-based app that leverages ParaView [@Ahrens:2005; @Henderson:2007] for data visualization and is distributed as a native desktop application using Tauri [@Tauri:2024] via the trame-tauri library [@Kitware:2022:trame-tauri]. Trame enables developers to control application behavior through triggers and change listeners on UI elements while providing widgets that integrate with visualization tools including ParaView. The trame-vtk widget [@Kitware:2024:trame-vtk] is used specifically for displaying ParaView renderings within the Trame application, providing seamless integration of VTK/ParaView visualization capabilities. ParaView's Python plugin system allows developers to create readers, filters, and writers entirely in Python without recompiling the C++ application, significantly accelerating development. For QuickView, custom NetCDF readers and specialized filters for processing EAM data were implemented as Python plugins. Tauri transforms the web application into a native desktop application, eliminating the need for users to install ParaView or configure Python environments by bundling all dependencies into a single executable with smaller application sizes and lower memory usage compared to alternatives.

# Acknowledgements

The authors thank Mark A. Taylor for helping with the generation of grid connectivity files needed for ParaView to parse EAM simulation output.

This work was supported primarily by the U.S. Department of Energy (DOE), Office of Science, Scientific Discovery through Advanced Computing (SciDAC) program via a partnership between the Advanced Scientific Computing Research (ASCR) and the Biological and Environmental Research (BER). KZ was supported by DOE BER through the E3SM project.

The work used resources of the National Energy Research Scientific Computing Center (NERSC), a DOE Office of Science User Facility located at Lawrence Berkeley National Laboratory, operated under contract DE-AC02-05CH11231, using NERSC awards ASCR-ERCAP0025451, ASCR-ERCAP0028881, ASCR-ERCAP0033440, and BER-ERCAP0030805. Pacific Northwest National Laboratory is operated by Battelle Memorial Institute for the U.S. Department of Energy under contract DE-AC06-76RLO1830.

# References
