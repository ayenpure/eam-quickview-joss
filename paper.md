---
title: 'EAM QuickView 1.0: A simulation data visualizer for the E3SM Atmosphere Model'
tags:
  - Python
  - visualization
  - graphical user interface
  - atmosphere modeling
authors:
  - name: Abhishek Yenpure
    orcid: 0000-0002-7403-7661
    corresponding: true # (This is how to denote the corresponding author)
    affiliation: 1
  - name: Berk Geveci
    orcid: 0000-0003-2477-4855
    affiliation: 1
  - name: Hui Wan
    orcid: 0000-0001-5294-4116
    affiliation: 2
  - name: Kai Zhang
    orcid: 0000-0003-0457-6368
    affiliation: 2
affiliations:
 - name: Kitware Inc., United States
   index: 1
   ror: 02s2acn37 # https://ror.org/02s2acn37
 - name: Atmospheric, Climate, and Earth Sciences Division, Pacific Northwest National Laboratory, United States
   index: 2
   ror: 05h992307 # https://ror.org/05h992307
date: 05 January 2025
bibliography: paper.bib

# Optional fields if submitting to a AAS journal too, see this blog post:
# https://blog.joss.theoj.org/2018/12/a-new-collaboration-with-aas-publishing
#aas-doi: 10.3847/xxxxx <- update this with the DOI from AAS once you know it.
#aas-journal: Astrophysical Journal <- The name of the AAS journal.
---

# Summary

EAM QuickView 1.0 is an application providing overviews of the geographical distribution of quantities simulated by a numerical atmospheric model, the Energy Exascale Earth System Model (E3SM) Atmosphere Model (EAM), directly from the NetCDF files generated by numerical simulations. Compared to existing NetCDF file visualizers, EAM QuickView 1.0 supports the visualization of multiple quantities and the arrangement of different figures by drag-and-drop, as well as saving the state of the visualization and resuming at a later time. Under the hood, EAM QuickView 1.0 uses the Python-based *trame* framework to create a simple and tailored user interface to the general-purpose data analysis and visualization application ParaView. This design choice makes ParaView accessible to atmospheric scientists without requiring expertise in visual analytics.

# Statement of need

EAM, like many other numerical models (i.e., simulation codes) used for climate and weather research and prediction, solves a complex set of differential equations and writes out results for a large number of physical quantities in the form of NetCDF files. After a simulation is completed and before more focused and detailed analyses are performed, it is often useful to conduct a quick inspection of the output files and obtain a first impression of the characteristic values and geographical distributions of the simulated quantities. The tool [ncview](https://cirrus.ucsd.edu/ncview/) developed by [@DavidWPierce:1993] has been used widely in the weather and climate modeling communities for quick and easy, push-button inspections of NetCDF files. The newer tool [ncvis](https://github.com/SEATStandards/ncvis) developed by [@PaulUllrich:2022] is inspired by [ncview](https://cirrus.ucsd.edu/ncview/) but can also handle data on unstructured meshes. 

The EAM QuickView application presented here has the additional feature of simultaneously visualizing multiple variables in a single viewport. The organization of the different variables in the viewport can be saved as a state file and reloaded when the application is started the next time. The atmosphere modelers' wish for such features has become more prominent in the past years due to the rapid increase of model complexity in terms of the number of equations solved by the numerical models and the number of prognostic and diagnostic variables typically archived in the NetCDF files. For example, to inspect the simulated aerosol life cycles, it may be useful to examine the concentrations of multiple chemical species in various particle size ranges (see, e.g., Figure 1); to obtain an impression of the simulated clouds, it may be useful to inspect the liquid and ice cloud fractions as well as the mass and number concentrations of liquid cloud drops, ice crystals, rain drops and snow flakes in the same viewport, to allow for a quick eye-ball comparison or a visual inspection of potential relationships.

# Overall strategy

The creation of EAM QuickView was part of a bigger effort on more effectively leveraging modern visual analytics tools to facilitate the development of EAM. The general-purpose visualization application ParaView was chosen to be the engine in this effort because of ParaView's large collection of analysis and visualization capabilities as well as its built-in ability to handle large volumes of data through parallel processing. The later is imperative for global atmospheres, especially in the era of high-resolution modeling. 

ParaView's own Graphical User Interface (GUI) is comprehensive, but using it requires a very steep learning curve. In our experience, this has resulted in many cases of frustration followed by disuse or rejection of the tool by users unfamiliar with the visual analytics language. To overcome this barrier, we decided to present a new set of applications (apps) to the atmospheric scientists developing and using EAM in the language of their scientific domain. Each of the apps will have a limited scope - and hence a simple and intuitive GUI - tailored to a single category of visualization tasks frequently carried out in the day-to-day work of EAM development. EAM QuickView is the first member of this new app family; other examples in development include quick comparison of two simulations as well as easy slicing and dicing of 3D fields using arbitrary planes and boxes.

Since the current work is focused on facilitating the development of EAM, our app presented here is designed to work with the cubed sphere horizontal mesh and the pressure-based terrain following vertical coordinate. In this sense, EAM QuickView is an app written specifically for EAM, while the earlier tool [ncvis](https://github.com/SEATStandards/ncvis) can be used out-of-the-box for many different models and meshes. The adaptation of EAM QuickView for other models and meshes can be done by updating the ParaView Reader in the app.

# Technical Details

QuickView is built on Kitware's Trame framework [@Kitware:2024:trame] to create a web-based application that leverages ParaView for data visualization and is distributed as a native desktop application using Tauri.

## Trame

Trame [@Kitware:2024:trame] enables developers to control application behavior through a comprehensive set of triggers and change listeners on UI elements. By monitoring variable values, developers can drive backend logic effectively. Additionally, Trame provides "widgets" that support integration with various popular visualization tools including Matplotlib, Plotly, VTK, and ParaView, allowing for rich interactive visualizations within a unified interface.

## ParaView Python Plugins

ParaView [@Ahrens:2005; @Henderson:2007] is a powerful open-source data analysis and visualization application built primarily in C++. Traditionally, adding new features to ParaView requires modifying C++ source code across multiple files and recompiling the entire applicationâ€”a time-consuming process that hinders rapid prototyping. However, ParaView's Python plugin system circumvents these limitations by enabling developers to create new readers, filters, and writers entirely in Python, with UI elements defined through decorators. This approach significantly accelerates the development of data processing pipelines. For QuickView, custom NetCDF readers and specialized filters for processing EAM data were implemented as Python plugins, which are automatically imported and loaded by ParaView at application startup.

## Tauri

To provide users with a native desktop experience without requiring complex installation procedures, QuickView employs Tauri [@Tauri:2024], a Rust-based framework that transforms web applications into native desktop applications. This approach eliminates the need for users to separately install ParaView or configure Python environments, as all dependencies are bundled into a single executable. Tauri's efficient architecture results in smaller application sizes and lower memory usage compared to alternative solutions, while maintaining native performance across Windows, macOS, and Linux platforms.


# Figures

![Figure 1: Aerosol concentrations simulated by EAMv2.](images/fig_EAMv2_aerosols.png)

# Acknowledgements

This work was supported primarily by the U.S. Department of Energy (DOE), Office of Science, Scientific Discovery through Advanced Computing (SciDAC) program via a partnership in Earth System Model Development between the Advanced Scientific Computing Research (ASCR) and the Biological and Environmental Research (BER). KZ was supported by DOE BER through the E3SM project.

The work used resources of the National Energy Research Scientific Computing Center (NERSC), a U.S. Department of Energy Office of Science User Facility located at Lawrence Berkeley National Laboratory, operated under contract DE-AC02-05CH11231, using NERSC awards ASCR-ERCAP0028881 and BER-ERCAP0030805. Pacific Northwest National Laboratory is operated by Battelle Memorial Institute for the U.S. Department of Energy under contract DE-AC06-76RLO1830.

# References
